# 🏆 Winrate Dashboard

Аналитическая панель для турниров с тремя дашбордами на Next.js 14.

## 🚀 Стек технологий

- **Next.js 14** - App Router, SSR
- **TypeScript** - типобезопасность  
- **Tailwind CSS** - утилитарная стилизация
- **MongoDB API** - база данных
- **React 18** - компонентная архитектура

## ⚡ Функции

### Dashboard 1 - Матчи
- 📋 Список предстоящих матчей с бейджами команд
- 🎮 Иконки дисциплин (CS2, Dota 2, Valorant и др.)
- 🔍 Поиск по командам
- 🎯 Фильтрация по дисциплинам и турнирам
- ✏️ Редактирование матчей через модалку
- 🏟️ Турнирные бейджи с выравниванием

### Dashboard 2 - Рейтинг команд  
- 📊 Таблица команд с статистикой
- 🏅 Позиции, победы, поражения
- 📈 Winrate и метрики
- 👆 Интерактивные строки

### Dashboard 3 - Команды университетов
- 🎓 Команды с составами игроков
- 🎮 Фильтрация по дисциплинам 
- ✅ Фильтр полного состава (исключает переукомплектованных)
- � Модалки с детальным составом

## �📁 Структура проекта

```
winrate/
├── 📁 app/                    # Next.js App Router
│   ├── 📄 layout.tsx         # Корневой layout
│   ├── 📄 page.tsx           # Главная (редирект)
│   ├── 📁 dashboard-1/       # Дашборд матчей
│   ├── 📁 dashboard-2/       # Дашборд команд
│   └── 📁 dashboard-3/       # Дашборд университетов
├── 📁 components/            # React компоненты
│   ├── 📄 Header.tsx         # Навигация с 3 табами
│   ├── 📄 MatchList.tsx      # Список матчей
│   ├── 📄 MatchCard.tsx      # Карточка матча с бейджами
│   ├── 📄 TeamList.tsx       # Список университетских команд
│   ├── 📄 TeamCard.tsx       # Карточка команды с составом
│   ├── 📄 SearchInput.tsx    # Поиск
│   ├── 📄 TeamStatsTable.tsx # Таблица команд рейтинга
│   └── 📄 EditMatchModal.tsx # Модалка редактирования
├── 📁 lib/                   # Утилиты и данные
│   ├── 📄 api.ts            # API клиент
│   ├── 📄 disciplines.ts    # Дисциплины и валидация составов
│   └── 📄 mockData.ts       # Генераторы mock данных
├── 📁 test/                  # Тест-скрипты
│   └── 📄 db-connection-test.js # Тест подключения MongoDB
├── 📄 .env.local            # Конфиг MongoDB API
├── 📄 package.json          # Зависимости
├── 📄 tailwind.config.ts    # Настройки Tailwind
└── 📄 tsconfig.json         # TypeScript конфиг
```



### 🗄️ MongoDB интеграция
- **API Routes** - серверные эндпоинты для безопасной работы с БД
- **Модульная структура** - каждая сущность в отдельном файле (`lib/api/`)
- **Многоуровневое кэширование** - HTTP Cache + клиентский кэш (5 минут)
- API токены в `.env.local`


### 🎨 Иконки дисциплин
- 10 игровых дисциплин с SVG иконками
- CS2, Dota 2, Valorant, Fortnite, MLBB, Standoff 2, Strinova, Warface, Калибр, Мир танков
- Автоматическая привязка через `disciplines.ts`

## 🛠️ Установка и запуск

```bash
# Установка зависимостей  
npm install

# Тест подключения к БД
node test/db-connection-test.js

# Запуск в режиме разработки
npm run dev
```

## 🌐 Роуты

### Страницы:
- `/` → автоперенаправление на dashboard-1
- `/dashboard-1` → матчи и турниры 
- `/dashboard-2` → рейтинг команд
- `/dashboard-3` → команды университетов

### API Endpoints:
- `GET /api/tournaments` → список турниров из MongoDB (кэш 5 мин)

## 🏗️ Архитектура API

### Модульная структура (`lib/api/`):
```typescript
// Импорт
import { getTournaments, Tournament } from '@/lib/api';

// Использование
const tournaments = await getTournaments(); // С кэшем
```

### Кэширование:
1. **Клиентский кэш** (в памяти) - 5 минут
2. **HTTP Cache-Control** (браузер) - 5 минут  
3. **stale-while-revalidate** - еще 10 минут устаревших данных

### Безопасность:
- API токены MongoDB только на сервере
- Next.js API Routes как прокси
- Очистка данных перед отправкой клиенту

